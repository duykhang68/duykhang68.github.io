<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Wildcardfuck</title>
    <meta name="description" content="">

    <!-- todo: include this into main.css -->
    <link href='https://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href=" /css/main.css ">
    <link rel="canonical" href="https://blog.tracelog.in/whatthefuck/2019/09/18/Wildcardfuck.html">
    <link rel="alternate" type="application/rss+xml" title="Hieu's blog" href="https://blog.tracelog.in /feed.xml ">
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script async src="https://blog.tracelog.in/assets/dist/fetch.min.js"></script>
    <!-- <script>
    (function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
    })(document, window, 'https://analytics.tracelog.in/tracker.js', 'fathom');
    fathom('trackPageview');
    </script> -->

    <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
    <script>
    (function(f, a, t, h, o, m){
        a[h]=a[h]||function(){
            (a[h].q=a[h].q||[]).push(arguments)
        };
        o=f.createElement('script'),
        m=f.getElementsByTagName('script')[0];
        o.async=1; o.src=t; o.id='fathom-script';
        m.parentNode.insertBefore(o,m)
    })(document, window, 'https://analytics.tracelog.in/tracker.js', 'fathom');
    fathom('set', 'siteId', 'WLEYN');
    fathom('trackPageview');
    </script>
    <!-- / Fathom -->

    <script src="//instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
</head>

  <body>
    <div class="page-content">
      <div class="container">
        <div class="three columns">
          <header class="site-header">

  <div class="nav">
    
    <label for="menu-toggle" class="menu-icon">
        <!--div data-icon="ei-navicon"></div-->
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
    </label>
    <input type="checkbox" id="menu-toggle">

    <div class="top-bar fixed">
      <nav>
        <ul class="page-link">
          <li><a href="/">Home</a></li>
          <li><a href="/archive">Posts</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="/photography">Photo</a></li>
          <li><a href="/friends">Friends</a></li>
          <li><a href="/2020-hireme" style="color: white;font-size: 15px;padding: 2px;background-color: #C25;">Hire me</a></span></li>
          <li><a href="/WhatTheFuck">WhatTheFuck</a></li>
        </ul>
      </nav>
    </div>

  </div>
</header>

        </div>

        <div class="nine columns" style="z-index:100;">
          <div class="wrapper">
            <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="article_header">
    <h1 class="special_title" itemprop="name headline">Wildcardfuck</h1>
    <time class="post_date">[Wednesday 18 September 2019] - whatthefuck - 3 min read</time>
  </header>

  <div class="article-content" itemprop="articleBody">
    <p><img src="/assets/img/asterisk-de.jpg" alt="img" title="Wildcardfuck" /></p>

<!--description-->

<p><img src="/assets/img/asterisk-ch.jpg" alt="img" title="Wildcardfuck" />
<img src="/assets/img/asterisk-at.jpg" alt="img" title="Wildcardfuck" /></p>

<h2 id="root-cause">Root cause</h2>

<ul>
  <li>There is no fucking rootcause in these cases.</li>
  <li>It’s lack of knowledge of the guy who did these configurations.</li>
  <li><strong>You’re assuming that you do it right and you know it clearly</strong>, <strong>but you never check</strong> or <strong>learn and understand</strong> it in the right way.</li>
</ul>

<h2 id="knowledge-base">Knowledge base</h2>

<ul>
  <li>
    <p>Character <strong>*</strong>  is <strong>Asterisk</strong>. A wildcard DNS record is a record in a DNS zone that will match requests for non-existent domain names. A wildcard DNS record is specified by using a <strong>*</strong> as the leftmost label (part) of a domain name, e.g. <code class="highlighter-rouge">*.example.com</code>.</p>
  </li>
  <li>
    <p>Wildcards in the DNS are <strong>much more limited</strong> than other wildcard characters used in other computer systems. <strong>Asterisks at other places in the domain will not work as a wildcard</strong>, so neither <code class="highlighter-rouge">*abc.example.com</code> nor <code class="highlighter-rouge">abc.*.example.com</code> work as wildcard DNS records</p>
  </li>
  <li>
    <h3 id="using-an-asterisk--in-aws-route53-hosted-zones-and-records">Using an Asterisk (*) in AWS Route53 Hosted Zones and Records</h3>

    <p>You can create hosted zones and records that include <strong>*</strong> in the name.</p>

    <p><strong>1. Hosted Zones</strong></p>
    <ul>
      <li>You can’t include an <strong>*</strong> in the leftmost label in a domain name. For example, <code class="highlighter-rouge">*.example.com</code> is not allowed.</li>
      <li>If you include <strong>*</strong> in other positions, DNS treats it as an <strong>*</strong> character (<code class="highlighter-rouge">ASCII 42</code>), not as a wildcard.</li>
    </ul>

    <p><strong>2. Records</strong></p>

    <p>DNS treats the <strong>*</strong> character either as a wildcard or as the <strong>*</strong> character (<code class="highlighter-rouge">ASCII 42</code>), depending on where it appears in the name. Note the following restrictions on using <strong>*</strong> as a wildcard in the name of a record:</p>
    <ul>
      <li>The <strong>*</strong> must replace the leftmost label in a domain name, for example, <code class="highlighter-rouge">*.example.com</code> or <code class="highlighter-rouge">*.acme.example.com</code>. If you include <strong>*</strong> in any other position, such as <code class="highlighter-rouge">prod.*.example.com</code>, DNS treats it as an <strong>*</strong> character (<code class="highlighter-rouge">ASCII 42</code>), not as a wildcard.</li>
      <li>The <strong>*</strong> must replace the entire label. For example, you can’t specify <code class="highlighter-rouge">*prod.example.com</code> or <code class="highlighter-rouge">prod*.example.com</code>.</li>
      <li>Specific domain names take precedence. For example, if you create records for <code class="highlighter-rouge">*.example.com</code> and <code class="highlighter-rouge">acme.example.com</code>, Route 53 always responds to DNS queries for <code class="highlighter-rouge">acme.example.com</code> with the values in the <code class="highlighter-rouge">acme.example.com</code> record.</li>
      <li>The <strong>*</strong> applies to DNS queries for the subdomain level that includes the asterisk, and all the subdomains of that subdomain. For example, if you create a record named <code class="highlighter-rouge">*.example.com</code>, Route 53 uses the values in that record to respond to DNS queries for <code class="highlighter-rouge">zenith.example.com</code>, <code class="highlighter-rouge">acme.zenith.example.com</code>, and <code class="highlighter-rouge">pinnacle.acme.zenith.example.com</code> (if there are no records that have those names).</li>
    </ul>
  </li>
</ul>

<h2 id="references">References</h2>

<ol>
  <li><a href="https://en.wikipedia.org/wiki/Wildcard_DNS_record">https://en.wikipedia.org/wiki/Wildcard_DNS_record</a></li>
  <li><a href="https://tools.ietf.org/html/rfc4592#page-6">https://tools.ietf.org/html/rfc4592#page-6</a></li>
  <li><a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/DomainNameFormat.html#domain-name-format-asterisk">https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/DomainNameFormat.html#domain-name-format-asterisk</a></li>
</ol>


    <div id="gitment-container"></div>
    <script async src="https://comments.app/js/widget.js?2" data-comments-app-website="iVXMIkzG" data-limit="10" data-color="E47911" data-dislikes="1" data-colorful="1"></script>
  </div>

  <footer class="article-footer">

  <hr/>

  <section class="author">
  <div class="authorimage box" style="background: url(/assets/img/avatar.webp)"></div>
  <div class="authorinfo box">
    <p class="bio" style="color: #222">
      I'm an engineer who likes learning, discussing, and solving problems. These days, I'm focusing on DevOps because I'd love to help ensure that services stay up and running, while continuing to ship software to customers rapidly. I also have a passion for building robust infrastructure at world scale.
    </p>
    <a class="github-button" href="https://github.com/hieuhtr" data-size="large" data-show-count="true" aria-label="Follow @hieuhtr on GitHub">Follow @hieuhtr</a>
  </div>
</section>


  </footer>

</article>


          </div>
        </div>
      </div>
    </div>
  </body>
</html>
